4e719520139cdac206b4a97c4d360c6d
"use strict";

var _interopRequireDefault = require("/home/anupamaa/Desktop/Training/pos/server/client/node_modules/@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getMenuItems = exports.getUsersOrders = exports.updateOrder = exports.getOrderItems = exports.userLogin = void 0;

var _config = require("../apiCalls/config");

var _auth = _interopRequireDefault(require("../authentication/auth"));

var _axios = _interopRequireDefault(require("axios"));

const baseUrl = "http://localhost:3001/";
const requestHeader = {
  headers: {
    "Authorization": "Bearer " + _config.apiConfig.authenticationToken
  }
};

const userLogin = credentials => {
  return new Promise((resolve, reject) => {
    postCall("users/login", credentials).then(result => {
      console.log(result);
      _config.apiConfig.authenticationToken = result.data.token;
      _config.apiConfig.userId = result.data.id;
      resolve();
    }).catch(err => {
      reject();
    });
  });
};

exports.userLogin = userLogin;

const getOrderItems = orderId => {
  return new Promise((resolve, reject) => {
    authenticatedGetCall("orders/" + orderId).then(result => {
      resolve(result);
    }).catch(err => {
      reject();
    });
  });
};

exports.getOrderItems = getOrderItems;

const updateOrder = (orderId, updateOps) => {
  return new Promise((resolve, reject) => {
    putCall("orders/" + orderId, updateOps).then(result => {
      resolve(result);
    }).catch(err => {
      reject();
    });
  });
}; // this needs to be changed


exports.updateOrder = updateOrder;

const getUsersOrders = () => {
  return new Promise((resolve, reject) => {
    console.log(_config.apiConfig.userId);
    authenticatedGetCall("orders/all/" + _config.apiConfig.userId).then(result => {
      resolve(result);
    }).catch(err => {
      reject();
    });
  });
};

exports.getUsersOrders = getUsersOrders;

const getMenuItems = () => {
  return new Promise((resolve, reject) => {
    authenticatedGetCall("items/").then(result => {
      resolve(result);
    }).catch(err => {
      reject();
    });
  });
};
/*
    POST, GET, PUT calls defined
 */


exports.getMenuItems = getMenuItems;

function postCall(url, mydata) {
  return new Promise((resolve, reject) => {
    let callingUrl = baseUrl + url;
    resolve(_axios.default.post(callingUrl, mydata).then(response => {
      return response;
    }));
  });
}

function authenticatedGetCall(url, header) {
  const requestHeader = {
    headers: {
      "Authorization": "Bearer " + _config.apiConfig.authenticationToken
    }
  };
  return new Promise((resolve, reject) => {
    let callingUrl = baseUrl + url;
    resolve(_axios.default.get(callingUrl, requestHeader).then(response => {
      return response;
    }));
  });
}

function putCall(url, updateOps) {
  return new Promise((resolve, reject) => {
    let callingUrl = baseUrl + url;
    resolve(_axios.default.put(callingUrl, updateOps).then(response => {
      return response;
    }));
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGxBcGkuanMiXSwibmFtZXMiOlsiYmFzZVVybCIsInJlcXVlc3RIZWFkZXIiLCJoZWFkZXJzIiwiYXBpQ29uZmlnIiwiYXV0aGVudGljYXRpb25Ub2tlbiIsInVzZXJMb2dpbiIsImNyZWRlbnRpYWxzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwb3N0Q2FsbCIsInRoZW4iLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInRva2VuIiwidXNlcklkIiwiaWQiLCJjYXRjaCIsImVyciIsImdldE9yZGVySXRlbXMiLCJvcmRlcklkIiwiYXV0aGVudGljYXRlZEdldENhbGwiLCJ1cGRhdGVPcmRlciIsInVwZGF0ZU9wcyIsInB1dENhbGwiLCJnZXRVc2Vyc09yZGVycyIsImdldE1lbnVJdGVtcyIsInVybCIsIm15ZGF0YSIsImNhbGxpbmdVcmwiLCJheGlvcyIsInBvc3QiLCJyZXNwb25zZSIsImhlYWRlciIsImdldCIsInB1dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHLHdCQUFoQjtBQUVBLE1BQU1DLGFBQWEsR0FBRztBQUFFQyxFQUFBQSxPQUFPLEVBQUU7QUFBRSxxQkFBaUIsWUFBWUMsa0JBQVVDO0FBQXpDO0FBQVgsQ0FBdEI7O0FBRU8sTUFBTUMsU0FBUyxHQUFJQyxXQUFELElBQWlCO0FBQ3RDLFNBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUNwQ0MsSUFBQUEsUUFBUSxDQUFDLGFBQUQsRUFBZ0JKLFdBQWhCLENBQVIsQ0FDS0ssSUFETCxDQUNVQyxNQUFNLElBQUk7QUFDWkMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLE1BQVo7QUFDSVQsd0JBQVVDLG1CQUFWLEdBQWdDUSxNQUFNLENBQUNHLElBQVAsQ0FBWUMsS0FBNUM7QUFDQWIsd0JBQVVjLE1BQVYsR0FBbUJMLE1BQU0sQ0FBQ0csSUFBUCxD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T0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3BDLFFBQUlzQixVQUFVLEdBQUcvQixPQUFPLEdBQUc2QixHQUEzQjtBQUNBckIsSUFBQUEsT0FBTyxDQUFDd0IsZUFBTUksR0FBTixDQUFVTCxVQUFWLEVBQXNCOUIsYUFBdEIsRUFDSFUsSUFERyxDQUNFdUIsUUFBUSxJQUFJO0FBQ2QsYUFBT0EsUUFBUDtBQUNILEtBSEcsQ0FBRCxDQUFQO0FBSUgsR0FOTSxDQUFQO0FBT0g7O0FBR0QsU0FBU1IsT0FBVCxDQUFpQkcsR0FBakIsRUFBc0JKLFNBQXRCLEVBQWlDO0FBQzdCLFNBQU8sSUFBSWxCLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDcEMsUUFBSXNCLFVBQVUsR0FBRy9CLE9BQU8sR0FBRzZCLEdBQTNCO0FBQ0FyQixJQUFBQSxPQUFPLENBQUN3QixlQUFNSyxHQUFOLENBQVVOLFVBQVYsRUFBcUJOLFNBQXJCLEVBQ0hkLElBREcsQ0FDRXVCLFFBQVEsSUFBSTtBQUNkLGFBQU9BLFFBQVA7QUFDSCxLQUhHLENBQUQsQ0FBUDtBQUlILEdBTk0sQ0FBUDtBQU9IIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBpQ29uZmlnIH0gZnJvbSAnLi4vYXBpQ2FsbHMvY29uZmlnJztcbmltcG9ydCBhdXRoIGZyb20gJy4uL2F1dGhlbnRpY2F0aW9uL2F1dGgnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuY29uc3QgYmFzZVVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAxL1wiO1xuXG5jb25zdCByZXF1ZXN0SGVhZGVyID0geyBoZWFkZXJzOiB7IFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIGFwaUNvbmZpZy5hdXRoZW50aWNhdGlvblRva2VuIH0gfVxuXG5leHBvcnQgY29uc3QgdXNlckxvZ2luID0gKGNyZWRlbnRpYWxzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcG9zdENhbGwoXCJ1c2Vycy9sb2dpblwiLCBjcmVkZW50aWFscylcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgYXBpQ29uZmlnLmF1dGhlbnRpY2F0aW9uVG9rZW4gPSByZXN1bHQuZGF0YS50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgYXBpQ29uZmlnLnVzZXJJZCA9IHJlc3VsdC5kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG5cblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge3JlamVjdCgpfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRPcmRlckl0ZW1zID0gKG9yZGVySWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBhdXRoZW50aWNhdGVkR2V0Q2FsbChcIm9yZGVycy9cIitvcmRlcklkKVxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG5cblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge3JlamVjdCgpfSk7XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZU9yZGVyID0gKG9yZGVySWQsIHVwZGF0ZU9wcykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHB1dENhbGwoXCJvcmRlcnMvXCIgKyBvcmRlcklkLCB1cGRhdGVPcHMpXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtyZWplY3QoKX0pO1xuICAgIH0pO1xufVxuXG5cbi8vIHRoaXMgbmVlZHMgdG8gYmUgY2hhbmdlZFxuZXhwb3J0IGNvbnN0IGdldFVzZXJzT3JkZXJzID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGFwaUNvbmZpZy51c2VySWQpO1xuICAgICAgICBhdXRoZW50aWNhdGVkR2V0Q2FsbChcIm9yZGVycy9hbGwvXCIgKyBhcGlDb25maWcudXNlcklkKVxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7cmVqZWN0KCl9KTtcbiAgICB9KTtcbn1cblxuXG5leHBvcnQgY29uc3QgZ2V0TWVudUl0ZW1zID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZWRHZXRDYWxsKFwiaXRlbXMvXCIpXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtyZWplY3QoKX0pO1xuICAgIH0pO1xufVxuXG5cbi8qXG4gICAgUE9TVCwgR0VULCBQVVQgY2FsbHMgZGVmaW5lZFxuICovXG5cbmZ1bmN0aW9uIHBvc3RDYWxsKHVybCwgbXlkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGNhbGxpbmdVcmwgPSBiYXNlVXJsICsgdXJsO1xuICAgICAgICByZXNvbHZlKGF4aW9zLnBvc3QoY2FsbGluZ1VybCwgbXlkYXRhKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBhdXRoZW50aWNhdGVkR2V0Q2FsbCh1cmwsIGhlYWRlcikge1xuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXIgPSB7IGhlYWRlcnM6IHsgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgYXBpQ29uZmlnLmF1dGhlbnRpY2F0aW9uVG9rZW4gfSB9O1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGNhbGxpbmdVcmwgPSBiYXNlVXJsICsgdXJsO1xuICAgICAgICByZXNvbHZlKGF4aW9zLmdldChjYWxsaW5nVXJsLCByZXF1ZXN0SGVhZGVyKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBwdXRDYWxsKHVybCwgdXBkYXRlT3BzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGNhbGxpbmdVcmwgPSBiYXNlVXJsICsgdXJsO1xuICAgICAgICByZXNvbHZlKGF4aW9zLnB1dChjYWxsaW5nVXJsLHVwZGF0ZU9wcylcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KSk7XG4gICAgfSk7XG59Il19