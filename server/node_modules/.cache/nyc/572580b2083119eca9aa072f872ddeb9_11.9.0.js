var cov_1paknuj7mh=function(){var path='/home/anupamaa/Desktop/Training/pos/server/api/controllers/items.js',hash='ea7d02ba8dc5424f977dfa1c17054466280f4794',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/anupamaa/Desktop/Training/pos/server/api/controllers/items.js',statementMap:{'0':{start:{line:1,column:17},end:{line:1,column:36}},'1':{start:{line:2,column:19},end:{line:2,column:47}},'2':{start:{line:4,column:13},end:{line:4,column:38}},'3':{start:{line:5,column:20},end:{line:5,column:54}},'4':{start:{line:6,column:22},end:{line:6,column:49}},'5':{start:{line:8,column:0},end:{line:38,column:1}},'6':{start:{line:9,column:4},end:{line:37,column:10}},'7':{start:{line:11,column:29},end:{line:21,column:13}},'8':{start:{line:14,column:20},end:{line:19,column:21}},'9':{start:{line:22,column:12},end:{line:29,column:13}},'10':{start:{line:23,column:16},end:{line:23,column:47}},'11':{start:{line:26,column:16},end:{line:28,column:19}},'12':{start:{line:33,column:12},end:{line:33,column:29}},'13':{start:{line:34,column:12},end:{line:36,column:15}},'14':{start:{line:41,column:0},end:{line:63,column:1}},'15':{start:{line:42,column:17},end:{line:47,column:6}},'16':{start:{line:49,column:4},end:{line:62,column:11}},'17':{start:{line:51,column:12},end:{line:51,column:32}},'18':{start:{line:52,column:12},end:{line:55,column:15}},'19':{start:{line:58,column:12},end:{line:58,column:29}},'20':{start:{line:59,column:12},end:{line:61,column:15}},'21':{start:{line:89,column:0},end:{line:109,column:1}},'22':{start:{line:90,column:13},end:{line:90,column:30}},'23':{start:{line:91,column:4},end:{line:108,column:11}},'24':{start:{line:93,column:12},end:{line:102,column:13}},'25':{start:{line:95,column:16},end:{line:95,column:53}},'26':{start:{line:99,column:16},end:{line:101,column:19}},'27':{start:{line:106,column:12},end:{line:106,column:102}},'28':{start:{line:107,column:12},end:{line:107,column:101}},'29':{start:{line:114,column:0},end:{line:125,column:1}},'30':{start:{line:115,column:15},end:{line:115,column:32}},'31':{start:{line:116,column:4},end:{line:124,column:11}},'32':{start:{line:119,column:12},end:{line:119,column:41}},'33':{start:{line:122,column:12},end:{line:122,column:29}},'34':{start:{line:123,column:12},end:{line:123,column:49}},'35':{start:{line:128,column:0},end:{line:146,column:1}},'36':{start:{line:129,column:15},end:{line:129,column:32}},'37':{start:{line:130,column:22},end:{line:130,column:24}},'38':{start:{line:131,column:4},end:{line:133,column:5}},'39':{start:{line:132,column:8},end:{line:132,column:44}},'40':{start:{line:134,column:4},end:{line:145,column:11}},'41':{start:{line:137,column:12},end:{line:137,column:32}},'42':{start:{line:138,column:12},end:{line:138,column:41}},'43':{start:{line:141,column:12},end:{line:141,column:29}},'44':{start:{line:142,column:12},end:{line:144,column:15}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:8,column:22},end:{line:8,column:23}},loc:{start:{line:8,column:42},end:{line:38,column:1}},line:8},'1':{name:'(anonymous_1)',decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:22},end:{line:31,column:9}},line:10},'2':{name:'(anonymous_2)',decl:{start:{line:13,column:32},end:{line:13,column:33}},loc:{start:{line:13,column:39},end:{line:20,column:17}},line:13},'3':{name:'(anonymous_3)',decl:{start:{line:32,column:15},end:{line:32,column:16}},loc:{start:{line:32,column:22},end:{line:37,column:9}},line:32},'4':{name:'(anonymous_4)',decl:{start:{line:41,column:28},end:{line:41,column:29}},loc:{start:{line:41,column:48},end:{line:63,column:1}},line:41},'5':{name:'(anonymous_5)',decl:{start:{line:50,column:13},end:{line:50,column:14}},loc:{start:{line:50,column:23},end:{line:56,column:9}},line:50},'6':{name:'(anonymous_6)',decl:{start:{line:57,column:15},end:{line:57,column:16}},loc:{start:{line:57,column:22},end:{line:62,column:9}},line:57},'7':{name:'(anonymous_7)',decl:{start:{line:89,column:23},end:{line:89,column:24}},loc:{start:{line:89,column:43},end:{line:109,column:1}},line:89},'8':{name:'(anonymous_8)',decl:{start:{line:92,column:14},end:{line:92,column:15}},loc:{start:{line:92,column:22},end:{line:104,column:9}},line:92},'9':{name:'(anonymous_9)',decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:22},end:{line:108,column:9}},line:105},'10':{name:'(anonymous_10)',decl:{start:{line:114,column:28},end:{line:114,column:29}},loc:{start:{line:114,column:48},end:{line:125,column:1}},line:114},'11':{name:'(anonymous_11)',decl:{start:{line:118,column:14},end:{line:118,column:15}},loc:{start:{line:118,column:24},end:{line:120,column:9}},line:118},'12':{name:'(anonymous_12)',decl:{start:{line:121,column:15},end:{line:121,column:16}},loc:{start:{line:121,column:22},end:{line:124,column:9}},line:121},'13':{name:'(anonymous_13)',decl:{start:{line:128,column:28},end:{line:128,column:29}},loc:{start:{line:128,column:48},end:{line:146,column:1}},line:128},'14':{name:'(anonymous_14)',decl:{start:{line:136,column:14},end:{line:136,column:15}},loc:{start:{line:136,column:24},end:{line:139,column:9}},line:136},'15':{name:'(anonymous_15)',decl:{start:{line:140,column:15},end:{line:140,column:16}},loc:{start:{line:140,column:22},end:{line:145,column:9}},line:140}},branchMap:{'0':{loc:{start:{line:22,column:12},end:{line:29,column:13}},type:'if',locations:[{start:{line:22,column:12},end:{line:29,column:13}},{start:{line:22,column:12},end:{line:29,column:13}}],line:22},'1':{loc:{start:{line:93,column:12},end:{line:102,column:13}},type:'if',locations:[{start:{line:93,column:12},end:{line:102,column:13}},{start:{line:93,column:12},end:{line:102,column:13}}],line:93}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0},b:{'0':[0,0],'1':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const mongoose=(cov_1paknuj7mh.s[0]++,require('mongoose'));const HttpStatus=(cov_1paknuj7mh.s[1]++,require('http-status-codes'));const Item=(cov_1paknuj7mh.s[2]++,require("../models/item"));const itemService=(cov_1paknuj7mh.s[3]++,require('../services/itemService'));const ErrorMessages=(cov_1paknuj7mh.s[4]++,require('../errorMessages'));cov_1paknuj7mh.s[5]++;exports.itemsGetAll=(req,res,next)=>{cov_1paknuj7mh.f[0]++;cov_1paknuj7mh.s[6]++;itemService.getAllItems().then(docs=>{cov_1paknuj7mh.f[1]++;const response=(cov_1paknuj7mh.s[7]++,{count:docs.length,items:docs.map(doc=>{cov_1paknuj7mh.f[2]++;cov_1paknuj7mh.s[8]++;return{name:doc.name,price:doc.price,_id:doc._id,category:doc.category};})});cov_1paknuj7mh.s[9]++;if(docs.length>=0){cov_1paknuj7mh.b[0][0]++;cov_1paknuj7mh.s[10]++;res.status(200).json(response);}else{cov_1paknuj7mh.b[0][1]++;cov_1paknuj7mh.s[11]++;res.status(404).json({message:"No entries found"});}}).catch(err=>{cov_1paknuj7mh.f[3]++;cov_1paknuj7mh.s[12]++;console.log(err);cov_1paknuj7mh.s[13]++;res.status(500).json({error:err});});};cov_1paknuj7mh.s[14]++;exports.items_create_item=(req,res,next)=>{cov_1paknuj7mh.f[4]++;const item=(cov_1paknuj7mh.s[15]++,new Item({_id:mongoose.Types.ObjectId(),name:req.body.name,price:req.body.price,category:req.body.category}));cov_1paknuj7mh.s[16]++;item.save().then(result=>{cov_1paknuj7mh.f[5]++;cov_1paknuj7mh.s[17]++;console.log(result);cov_1paknuj7mh.s[18]++;res.status(201).json({message:"Succefully created a new item",createdItem:item});}).catch(err=>{cov_1paknuj7mh.f[6]++;cov_1paknuj7mh.s[19]++;console.log(err);cov_1paknuj7mh.s[20]++;res.status(500).json({error:err});});};// exports.items_get_item = (req, res, next) => {
//     const id = req.params.itemId;
//     Item.findById(id)
//         .exec()
//         .then(doc => {
//             console.log(doc);
//             if (doc) {
//                 res.status(200).json(doc);
//             }
//             else {
//                 res.status(404).json({
//                     //TODO error handle 
//                     message: "No valid entry found for provided id"
//                 });
//             }
//         })
//         .catch(err => {
//             console.log(err);
//             res.status(500).json({ error: err });
//         });
// }
cov_1paknuj7mh.s[21]++;exports.itemsGetItem=(req,res,next)=>{cov_1paknuj7mh.f[7]++;let id=(cov_1paknuj7mh.s[22]++,req.params.itemId);cov_1paknuj7mh.s[23]++;itemService.getItemById(id).then(data=>{cov_1paknuj7mh.f[8]++;cov_1paknuj7mh.s[24]++;if(data){cov_1paknuj7mh.b[1][0]++;cov_1paknuj7mh.s[25]++;//TODO logger.info
res.status(HttpStatus.OK).json(data);}else{cov_1paknuj7mh.b[1][1]++;cov_1paknuj7mh.s[26]++;//TODO logger.info
res.status(HttpStatus.NOT_FOUND).json({message:ErrorMessages.ITEM_UNAVAILABLE});}}).catch(err=>{cov_1paknuj7mh.f[9]++;cov_1paknuj7mh.s[27]++;logger.error("error occurred while retriving item for the item id ${id}",err,'item.js');cov_1paknuj7mh.s[28]++;res.status(HttpStatus.INTERNAL_SERVER_ERROR).json({error:ErrorMessages.SERVER_ERROR});});};//TODO fix camel case
cov_1paknuj7mh.s[29]++;exports.items_delete_item=(req,res,next)=>{cov_1paknuj7mh.f[10]++;const id=(cov_1paknuj7mh.s[30]++,req.params.itemId);cov_1paknuj7mh.s[31]++;Item.remove({_id:id}).exec().then(result=>{cov_1paknuj7mh.f[11]++;cov_1paknuj7mh.s[32]++;res.status(200).json(result);}).catch(err=>{cov_1paknuj7mh.f[12]++;cov_1paknuj7mh.s[33]++;console.log(err);cov_1paknuj7mh.s[34]++;res.status(500).json({error:err});});};cov_1paknuj7mh.s[35]++;exports.items_update_item=(req,res,next)=>{cov_1paknuj7mh.f[13]++;const id=(cov_1paknuj7mh.s[36]++,req.params.itemId);const updateOps=(cov_1paknuj7mh.s[37]++,{});cov_1paknuj7mh.s[38]++;for(const ops of req.body){cov_1paknuj7mh.s[39]++;updateOps[ops.propName]=ops.value;}cov_1paknuj7mh.s[40]++;Item.update({_id:id},{$set:updateOps}).exec().then(result=>{cov_1paknuj7mh.f[14]++;cov_1paknuj7mh.s[41]++;console.log(result);cov_1paknuj7mh.s[42]++;res.status(200).json(result);}).catch(err=>{cov_1paknuj7mh.f[15]++;cov_1paknuj7mh.s[43]++;console.log(err);cov_1paknuj7mh.s[44]++;res.status(500).json({error:err});});};