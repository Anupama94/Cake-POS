var cov_c7nnlthl9=function(){var path='/home/anupamaa/Desktop/Training/pos/server/api/controllers/orders.js',hash='b3f7fd51d9f4ae704213f47352ba8f3d822359b6',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/anupamaa/Desktop/Training/pos/server/api/controllers/orders.js',statementMap:{'0':{start:{line:1,column:17},end:{line:1,column:36}},'1':{start:{line:2,column:21},end:{line:2,column:50}},'2':{start:{line:3,column:14},end:{line:3,column:40}},'3':{start:{line:42,column:0},end:{line:76,column:1}},'4':{start:{line:43,column:4},end:{line:74,column:11}},'5':{start:{line:45,column:29},end:{line:58,column:13}},'6':{start:{line:48,column:20},end:{line:56,column:21}},'7':{start:{line:59,column:12},end:{line:66,column:13}},'8':{start:{line:60,column:16},end:{line:60,column:47}},'9':{start:{line:63,column:16},end:{line:65,column:19}},'10':{start:{line:70,column:12},end:{line:70,column:29}},'11':{start:{line:71,column:12},end:{line:73,column:15}},'12':{start:{line:78,column:0},end:{line:110,column:1}},'13':{start:{line:80,column:23},end:{line:80,column:25}},'14':{start:{line:82,column:4},end:{line:85,column:5}},'15':{start:{line:83,column:26},end:{line:83,column:74}},'16':{start:{line:84,column:8},end:{line:84,column:35}},'17':{start:{line:87,column:18},end:{line:95,column:6}},'18':{start:{line:96,column:4},end:{line:96,column:32}},'19':{start:{line:98,column:4},end:{line:108,column:11}},'20':{start:{line:100,column:12},end:{line:100,column:32}},'21':{start:{line:101,column:12},end:{line:101,column:41}},'22':{start:{line:104,column:12},end:{line:104,column:29}},'23':{start:{line:105,column:12},end:{line:107,column:15}},'24':{start:{line:113,column:0},end:{line:134,column:1}},'25':{start:{line:114,column:15},end:{line:114,column:33}},'26':{start:{line:115,column:4},end:{line:133,column:11}},'27':{start:{line:119,column:12},end:{line:119,column:29}},'28':{start:{line:120,column:12},end:{line:127,column:13}},'29':{start:{line:121,column:16},end:{line:121,column:42}},'30':{start:{line:124,column:16},end:{line:126,column:19}},'31':{start:{line:131,column:12},end:{line:131,column:29}},'32':{start:{line:132,column:12},end:{line:132,column:49}},'33':{start:{line:137,column:0},end:{line:155,column:1}},'34':{start:{line:138,column:15},end:{line:138,column:33}},'35':{start:{line:139,column:22},end:{line:139,column:24}},'36':{start:{line:140,column:4},end:{line:142,column:5}},'37':{start:{line:141,column:8},end:{line:141,column:39}},'38':{start:{line:143,column:4},end:{line:154,column:11}},'39':{start:{line:146,column:12},end:{line:146,column:32}},'40':{start:{line:147,column:12},end:{line:147,column:41}},'41':{start:{line:150,column:12},end:{line:150,column:29}},'42':{start:{line:151,column:12},end:{line:153,column:15}},'43':{start:{line:158,column:0},end:{line:169,column:1}},'44':{start:{line:159,column:15},end:{line:159,column:33}},'45':{start:{line:160,column:4},end:{line:168,column:11}},'46':{start:{line:163,column:12},end:{line:163,column:41}},'47':{start:{line:166,column:12},end:{line:166,column:29}},'48':{start:{line:167,column:12},end:{line:167,column:49}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:42,column:25},end:{line:42,column:26}},loc:{start:{line:42,column:45},end:{line:76,column:1}},line:42},'1':{name:'(anonymous_1)',decl:{start:{line:44,column:14},end:{line:44,column:15}},loc:{start:{line:44,column:22},end:{line:68,column:9}},line:44},'2':{name:'(anonymous_2)',decl:{start:{line:47,column:33},end:{line:47,column:34}},loc:{start:{line:47,column:40},end:{line:57,column:17}},line:47},'3':{name:'(anonymous_3)',decl:{start:{line:69,column:15},end:{line:69,column:16}},loc:{start:{line:69,column:22},end:{line:74,column:9}},line:69},'4':{name:'(anonymous_4)',decl:{start:{line:78,column:30},end:{line:78,column:31}},loc:{start:{line:78,column:50},end:{line:110,column:1}},line:78},'5':{name:'(anonymous_5)',decl:{start:{line:99,column:14},end:{line:99,column:15}},loc:{start:{line:99,column:24},end:{line:102,column:9}},line:99},'6':{name:'(anonymous_6)',decl:{start:{line:103,column:15},end:{line:103,column:16}},loc:{start:{line:103,column:22},end:{line:108,column:9}},line:103},'7':{name:'(anonymous_7)',decl:{start:{line:113,column:27},end:{line:113,column:28}},loc:{start:{line:113,column:47},end:{line:134,column:1}},line:113},'8':{name:'(anonymous_8)',decl:{start:{line:118,column:14},end:{line:118,column:15}},loc:{start:{line:118,column:21},end:{line:129,column:9}},line:118},'9':{name:'(anonymous_9)',decl:{start:{line:130,column:15},end:{line:130,column:16}},loc:{start:{line:130,column:22},end:{line:133,column:9}},line:130},'10':{name:'(anonymous_10)',decl:{start:{line:137,column:29},end:{line:137,column:30}},loc:{start:{line:137,column:49},end:{line:155,column:1}},line:137},'11':{name:'(anonymous_11)',decl:{start:{line:145,column:14},end:{line:145,column:15}},loc:{start:{line:145,column:24},end:{line:148,column:9}},line:145},'12':{name:'(anonymous_12)',decl:{start:{line:149,column:15},end:{line:149,column:16}},loc:{start:{line:149,column:22},end:{line:154,column:9}},line:149},'13':{name:'(anonymous_13)',decl:{start:{line:158,column:29},end:{line:158,column:30}},loc:{start:{line:158,column:49},end:{line:169,column:1}},line:158},'14':{name:'(anonymous_14)',decl:{start:{line:162,column:14},end:{line:162,column:15}},loc:{start:{line:162,column:24},end:{line:164,column:9}},line:162},'15':{name:'(anonymous_15)',decl:{start:{line:165,column:15},end:{line:165,column:16}},loc:{start:{line:165,column:22},end:{line:168,column:9}},line:165}},branchMap:{'0':{loc:{start:{line:59,column:12},end:{line:66,column:13}},type:'if',locations:[{start:{line:59,column:12},end:{line:66,column:13}},{start:{line:59,column:12},end:{line:66,column:13}}],line:59},'1':{loc:{start:{line:120,column:12},end:{line:127,column:13}},type:'if',locations:[{start:{line:120,column:12},end:{line:127,column:13}},{start:{line:120,column:12},end:{line:127,column:13}}],line:120}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0},b:{'0':[0,0],'1':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const mongoose=(cov_c7nnlthl9.s[0]++,require('mongoose'));const OrderService=(cov_c7nnlthl9.s[1]++,require('../services/orders'));const Order=(cov_c7nnlthl9.s[2]++,require("../models/order"));// exports.orders_get_all = (req, res, next) => {
//     Order.find()
//         .populate("items.product")
//         .exec()
//         .then(docs => {
//             const response = {
//                 count: docs.length,
//                 orders: docs.map(doc => {
//                     return {
//                         id: doc._id,
//                         items: doc.items,
//                         status: doc.status,
//                         customer: doc.customer,
//                         creator: doc.creator,
//                         totalPrice: doc.totalPrice,
//                         time: doc.time
//                     }
//                 })
//             }
//             if (docs.length >= 0) {
//                 res.status(200).json(response);
//             }
//             else {
//                 res.status(404).json({
//                     message: "No entries found"
//                 });
//             }
//         })
//         .catch(err => {
//             console.log(err);
//             res.status(500).json({
//                 error: err
//             });
//         });
// }
cov_c7nnlthl9.s[3]++;exports.orders_get_all=(req,res,next)=>{cov_c7nnlthl9.f[0]++;cov_c7nnlthl9.s[4]++;OrderService.getAllOrders().then(docs=>{cov_c7nnlthl9.f[1]++;const response=(cov_c7nnlthl9.s[5]++,{count:docs.length,orders:docs.map(doc=>{cov_c7nnlthl9.f[2]++;cov_c7nnlthl9.s[6]++;return{id:doc._id,items:doc.items,status:doc.status,customer:doc.customer,creator:doc.creator,totalPrice:doc.totalPrice,time:doc.time};})});cov_c7nnlthl9.s[7]++;if(docs.length>=0){cov_c7nnlthl9.b[0][0]++;cov_c7nnlthl9.s[8]++;res.status(200).json(response);}else{cov_c7nnlthl9.b[0][1]++;cov_c7nnlthl9.s[9]++;res.status(404).json({message:"No entries found"});}}).catch(err=>{cov_c7nnlthl9.f[3]++;cov_c7nnlthl9.s[10]++;console.log(err);cov_c7nnlthl9.s[11]++;res.status(500).json({error:err});});};cov_c7nnlthl9.s[12]++;exports.orders_create_order=(req,res,next)=>{cov_c7nnlthl9.f[4]++;const orderItems=(cov_c7nnlthl9.s[13]++,[]);cov_c7nnlthl9.s[14]++;for(const ops of req.body.items){const updateOps=(cov_c7nnlthl9.s[15]++,{product:ops.product,quantity:ops.quantity});cov_c7nnlthl9.s[16]++;orderItems.push(updateOps);}const order=(cov_c7nnlthl9.s[17]++,new Order({_id:mongoose.Types.ObjectId(),items:orderItems,status:"open",customer:req.body.customer,totalPrice:req.body.totalPrice,creator:mongoose.Types.ObjectId(),time:Date.now()}));cov_c7nnlthl9.s[18]++;console.log(req.body.items);cov_c7nnlthl9.s[19]++;order.save().then(result=>{cov_c7nnlthl9.f[5]++;cov_c7nnlthl9.s[20]++;console.log(result);cov_c7nnlthl9.s[21]++;res.status(201).json(result);}).catch(err=>{cov_c7nnlthl9.f[6]++;cov_c7nnlthl9.s[22]++;console.log(err);cov_c7nnlthl9.s[23]++;res.status(500).json({error:err});});};cov_c7nnlthl9.s[24]++;exports.orders_get_order=(req,res,next)=>{cov_c7nnlthl9.f[7]++;const id=(cov_c7nnlthl9.s[25]++,req.params.orderId);cov_c7nnlthl9.s[26]++;Order.findById(id).populate('items.product').exec().then(doc=>{cov_c7nnlthl9.f[8]++;cov_c7nnlthl9.s[27]++;console.log(doc);cov_c7nnlthl9.s[28]++;if(doc){cov_c7nnlthl9.b[1][0]++;cov_c7nnlthl9.s[29]++;res.status(200).json(doc);}else{cov_c7nnlthl9.b[1][1]++;cov_c7nnlthl9.s[30]++;res.status(404).json({message:"No valid entry found for provided id"});}}).catch(err=>{cov_c7nnlthl9.f[9]++;cov_c7nnlthl9.s[31]++;console.log(err);cov_c7nnlthl9.s[32]++;res.status(500).json({error:err});});};cov_c7nnlthl9.s[33]++;exports.order_update_order=(req,res,next)=>{cov_c7nnlthl9.f[10]++;const id=(cov_c7nnlthl9.s[34]++,req.params.orderId);const updateOps=(cov_c7nnlthl9.s[35]++,{});cov_c7nnlthl9.s[36]++;for(const key of Object.keys(req.body)){cov_c7nnlthl9.s[37]++;updateOps[key]=req.body[key];}cov_c7nnlthl9.s[38]++;Order.update({_id:id},{$set:updateOps}).exec().then(result=>{cov_c7nnlthl9.f[11]++;cov_c7nnlthl9.s[39]++;console.log(result);cov_c7nnlthl9.s[40]++;res.status(200).json(result);}).catch(err=>{cov_c7nnlthl9.f[12]++;cov_c7nnlthl9.s[41]++;console.log(err);cov_c7nnlthl9.s[42]++;res.status(500).json({error:err});});};cov_c7nnlthl9.s[43]++;exports.order_delete_order=(req,res,next)=>{cov_c7nnlthl9.f[13]++;const id=(cov_c7nnlthl9.s[44]++,req.params.orderId);cov_c7nnlthl9.s[45]++;Order.remove({_id:id}).exec().then(result=>{cov_c7nnlthl9.f[14]++;cov_c7nnlthl9.s[46]++;res.status(200).json(result);}).catch(err=>{cov_c7nnlthl9.f[15]++;cov_c7nnlthl9.s[47]++;console.log(err);cov_c7nnlthl9.s[48]++;res.status(500).json({error:err});});};