var cov_1dgejo5ad7=function(){var path='/home/anupamaa/Desktop/Training/pos/server/api/routes/products.js',hash='8946360b89bb5caef278520bafb1f7c1364f2d4a',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/home/anupamaa/Desktop/Training/pos/server/api/routes/products.js',statementMap:{'0':{start:{line:1,column:16},end:{line:1,column:34}},'1':{start:{line:2,column:15},end:{line:2,column:31}},'2':{start:{line:3,column:17},end:{line:3,column:36}},'3':{start:{line:4,column:18},end:{line:4,column:53}},'4':{start:{line:6,column:16},end:{line:6,column:44}},'5':{start:{line:8,column:0},end:{line:45,column:3}},'6':{start:{line:9,column:4},end:{line:43,column:10}},'7':{start:{line:13,column:29},end:{line:27,column:13}},'8':{start:{line:16,column:20},end:{line:25,column:21}},'9':{start:{line:29,column:16},end:{line:29,column:47}},'10':{start:{line:39,column:12},end:{line:39,column:29}},'11':{start:{line:40,column:12},end:{line:42,column:15}},'12':{start:{line:47,column:0},end:{line:68,column:3}},'13':{start:{line:48,column:20},end:{line:52,column:6}},'14':{start:{line:54,column:4},end:{line:67,column:11}},'15':{start:{line:56,column:12},end:{line:56,column:32}},'16':{start:{line:57,column:12},end:{line:60,column:15}},'17':{start:{line:63,column:12},end:{line:63,column:29}},'18':{start:{line:64,column:12},end:{line:66,column:15}},'19':{start:{line:70,column:0},end:{line:91,column:3}},'20':{start:{line:71,column:15},end:{line:71,column:35}},'21':{start:{line:72,column:4},end:{line:89,column:11}},'22':{start:{line:75,column:12},end:{line:75,column:29}},'23':{start:{line:76,column:12},end:{line:83,column:13}},'24':{start:{line:77,column:16},end:{line:77,column:42}},'25':{start:{line:80,column:16},end:{line:82,column:19}},'26':{start:{line:87,column:12},end:{line:87,column:29}},'27':{start:{line:88,column:12},end:{line:88,column:49}},'28':{start:{line:93,column:0},end:{line:104,column:3}},'29':{start:{line:94,column:15},end:{line:94,column:35}},'30':{start:{line:95,column:4},end:{line:103,column:11}},'31':{start:{line:98,column:12},end:{line:98,column:41}},'32':{start:{line:101,column:12},end:{line:101,column:29}},'33':{start:{line:102,column:12},end:{line:102,column:49}},'34':{start:{line:107,column:0},end:{line:125,column:3}},'35':{start:{line:108,column:15},end:{line:108,column:35}},'36':{start:{line:109,column:22},end:{line:109,column:24}},'37':{start:{line:110,column:4},end:{line:112,column:5}},'38':{start:{line:111,column:8},end:{line:111,column:44}},'39':{start:{line:113,column:4},end:{line:124,column:7}},'40':{start:{line:116,column:8},end:{line:116,column:28}},'41':{start:{line:117,column:8},end:{line:117,column:37}},'42':{start:{line:120,column:8},end:{line:120,column:25}},'43':{start:{line:121,column:8},end:{line:123,column:11}},'44':{start:{line:130,column:0},end:{line:130,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:8,column:27},end:{line:8,column:28}},loc:{start:{line:8,column:47},end:{line:45,column:1}},line:8},'1':{name:'(anonymous_1)',decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:22},end:{line:37,column:9}},line:12},'2':{name:'(anonymous_2)',decl:{start:{line:15,column:35},end:{line:15,column:36}},loc:{start:{line:15,column:42},end:{line:26,column:17}},line:15},'3':{name:'(anonymous_3)',decl:{start:{line:38,column:15},end:{line:38,column:16}},loc:{start:{line:38,column:22},end:{line:43,column:9}},line:38},'4':{name:'(anonymous_4)',decl:{start:{line:47,column:17},end:{line:47,column:18}},loc:{start:{line:47,column:37},end:{line:68,column:1}},line:47},'5':{name:'(anonymous_5)',decl:{start:{line:55,column:13},end:{line:55,column:14}},loc:{start:{line:55,column:23},end:{line:61,column:9}},line:55},'6':{name:'(anonymous_6)',decl:{start:{line:62,column:15},end:{line:62,column:16}},loc:{start:{line:62,column:22},end:{line:67,column:9}},line:62},'7':{name:'(anonymous_7)',decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:46},end:{line:91,column:1}},line:70},'8':{name:'(anonymous_8)',decl:{start:{line:74,column:14},end:{line:74,column:15}},loc:{start:{line:74,column:21},end:{line:85,column:9}},line:74},'9':{name:'(anonymous_9)',decl:{start:{line:86,column:15},end:{line:86,column:16}},loc:{start:{line:86,column:22},end:{line:89,column:9}},line:86},'10':{name:'(anonymous_10)',decl:{start:{line:93,column:29},end:{line:93,column:30}},loc:{start:{line:93,column:49},end:{line:104,column:1}},line:93},'11':{name:'(anonymous_11)',decl:{start:{line:97,column:14},end:{line:97,column:15}},loc:{start:{line:97,column:24},end:{line:99,column:9}},line:97},'12':{name:'(anonymous_12)',decl:{start:{line:100,column:15},end:{line:100,column:16}},loc:{start:{line:100,column:22},end:{line:103,column:9}},line:100},'13':{name:'(anonymous_13)',decl:{start:{line:107,column:28},end:{line:107,column:29}},loc:{start:{line:107,column:48},end:{line:125,column:1}},line:107},'14':{name:'(anonymous_14)',decl:{start:{line:115,column:10},end:{line:115,column:11}},loc:{start:{line:115,column:20},end:{line:118,column:5}},line:115},'15':{name:'(anonymous_15)',decl:{start:{line:119,column:11},end:{line:119,column:12}},loc:{start:{line:119,column:18},end:{line:124,column:5}},line:119}},branchMap:{'0':{loc:{start:{line:76,column:12},end:{line:83,column:13}},type:'if',locations:[{start:{line:76,column:12},end:{line:83,column:13}},{start:{line:76,column:12},end:{line:83,column:13}}],line:76}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0},b:{'0':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const express=(cov_1dgejo5ad7.s[0]++,require('express'));const router=(cov_1dgejo5ad7.s[1]++,express.Router());const mongoose=(cov_1dgejo5ad7.s[2]++,require('mongoose'));const checkAuth=(cov_1dgejo5ad7.s[3]++,require('../middleware/check-auth'));const Product=(cov_1dgejo5ad7.s[4]++,require('../models/product'));cov_1dgejo5ad7.s[5]++;router.get('/',checkAuth,(req,res,next)=>{cov_1dgejo5ad7.f[0]++;cov_1dgejo5ad7.s[6]++;Product.find().select("name price id").exec().then(docs=>{cov_1dgejo5ad7.f[1]++;const response=(cov_1dgejo5ad7.s[7]++,{count:docs.length,products:docs.map(doc=>{cov_1dgejo5ad7.f[2]++;cov_1dgejo5ad7.s[8]++;return{name:doc.name,price:doc.price,_id:doc._id,request:{type:'GET',url:"http://localhost:3001/products/"+doc.id}};})// if (docs.length >= 0) {
});cov_1dgejo5ad7.s[9]++;res.status(200).json(response);// }
// else {
//     res.status(404).json({
//         message: "No entries found"
//     });
// }
}).catch(err=>{cov_1dgejo5ad7.f[3]++;cov_1dgejo5ad7.s[10]++;console.log(err);cov_1dgejo5ad7.s[11]++;res.status(500).json({error:err});});});cov_1dgejo5ad7.s[12]++;router.post('/',(req,res,next)=>{cov_1dgejo5ad7.f[4]++;const product=(cov_1dgejo5ad7.s[13]++,new Product({_id:mongoose.Types.ObjectId(),name:req.body.name,price:req.body.price}));cov_1dgejo5ad7.s[14]++;product.save().then(result=>{cov_1dgejo5ad7.f[5]++;cov_1dgejo5ad7.s[15]++;console.log(result);cov_1dgejo5ad7.s[16]++;res.status(201).json({message:"Handling POST requests to /products",createdProduct:product});}).catch(err=>{cov_1dgejo5ad7.f[6]++;cov_1dgejo5ad7.s[17]++;console.log(err);cov_1dgejo5ad7.s[18]++;res.status(500).json({error:err});});});cov_1dgejo5ad7.s[19]++;router.get('/:productId',(req,res,next)=>{cov_1dgejo5ad7.f[7]++;const id=(cov_1dgejo5ad7.s[20]++,req.params.productId);cov_1dgejo5ad7.s[21]++;Product.findById(id).exec().then(doc=>{cov_1dgejo5ad7.f[8]++;cov_1dgejo5ad7.s[22]++;console.log(doc);cov_1dgejo5ad7.s[23]++;if(doc){cov_1dgejo5ad7.b[0][0]++;cov_1dgejo5ad7.s[24]++;res.status(200).json(doc);}else{cov_1dgejo5ad7.b[0][1]++;cov_1dgejo5ad7.s[25]++;res.status(404).json({message:"No valid entry found for provided entry"});}}).catch(err=>{cov_1dgejo5ad7.f[9]++;cov_1dgejo5ad7.s[26]++;console.log(err);cov_1dgejo5ad7.s[27]++;res.status(500).json({error:err});});});cov_1dgejo5ad7.s[28]++;router.delete('/:productId',(req,res,next)=>{cov_1dgejo5ad7.f[10]++;const id=(cov_1dgejo5ad7.s[29]++,req.params.productId);cov_1dgejo5ad7.s[30]++;Product.remove({_id:id}).exec().then(result=>{cov_1dgejo5ad7.f[11]++;cov_1dgejo5ad7.s[31]++;res.status(200).json(result);}).catch(err=>{cov_1dgejo5ad7.f[12]++;cov_1dgejo5ad7.s[32]++;console.log(err);cov_1dgejo5ad7.s[33]++;res.status(500).json({error:err});});});cov_1dgejo5ad7.s[34]++;router.patch('/:productId',(req,res,next)=>{cov_1dgejo5ad7.f[13]++;const id=(cov_1dgejo5ad7.s[35]++,req.params.productId);const updateOps=(cov_1dgejo5ad7.s[36]++,{});cov_1dgejo5ad7.s[37]++;for(const ops of req.body){cov_1dgejo5ad7.s[38]++;updateOps[ops.propName]=ops.value;}cov_1dgejo5ad7.s[39]++;Product.update({_id:id},{$set:updateOps}).exec().then(result=>{cov_1dgejo5ad7.f[14]++;cov_1dgejo5ad7.s[40]++;console.log(result);cov_1dgejo5ad7.s[41]++;res.status(200).json(result);}).catch(err=>{cov_1dgejo5ad7.f[15]++;cov_1dgejo5ad7.s[42]++;console.log(err);cov_1dgejo5ad7.s[43]++;res.status(500).json({error:err});});});cov_1dgejo5ad7.s[44]++;module.exports=router;